<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Etiquetas Verdes - Jornadas</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: 'Lato', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }
        
        .status-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 12px;
            margin: 20px 0;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .countdown {
            font-size: 3rem;
            font-weight: bold;
            margin: 20px 0;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .event-info {
            background: rgba(40, 167, 69, 0.2);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #28a745;
        }
        
        .instructions {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            text-align: left;
        }
        
        .debug-info {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 4px;
            margin: 15px 0;
            font-family: monospace;
            font-size: 14px;
            text-align: left;
        }
        
        button {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 10px 20px;
            border-radius: 20px;
            margin: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }
        
        button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        
        .success { color: #28a745; }
        .warning { color: #ffc107; }
        .info { color: #17a2b8; }
        
        .expected-result {
            background: rgba(40, 167, 69, 0.3);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border: 2px solid #28a745;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß™ Test Etiquetas Verdes en Jornadas</h1>
        <p>Probando las etiquetas verdes que aparecen en las cards de eventos en curso</p>
        
        <div class="event-info">
            <h3>üìÖ Evento de Prueba en Jornadas</h3>
            <p><strong>Nombre:</strong> Evento de Prueba</p>
            <p><strong>Hora:</strong> 21:15 - 22:15 hrs</p>
            <p><strong>Tipo:</strong> Ponencia</p>
            <p><strong>Ubicaci√≥n:</strong> Auditorio 1</p>
        </div>
        
        <div class="status-card">
            <h3>‚è∞ Estado del Sistema</h3>
            <div class="countdown" id="countdown">Cargando...</div>
            <p id="status-text">Verificando sistema...</p>
        </div>
        
        <div class="expected-result">
            <h3>üéØ Lo que Deber√≠as Ver en Jornadas</h3>
            <p><strong>Antes del evento (21:04 - 21:14):</strong></p>
            <ul style="text-align: left;">
                <li>‚ùå <strong>Sin etiqueta verde</strong> en la card</li>
                <li>‚ùå <strong>Sin punto pulsante</strong> en la esquina</li>
                <li>‚ö™ <strong>Card normal</strong> sin efectos especiales</li>
            </ul>
            
            <p><strong>Durante el evento (21:15 - 22:15):</strong></p>
            <ul style="text-align: left;">
                <li>‚úÖ <strong>Etiqueta verde</strong> con "Comenz√≥ hace X min"</li>
                <li>‚ö° <strong>Punto pulsante</strong> verde en la esquina superior derecha</li>
                <li>üü¢ <strong>Card destacada</strong> con efectos especiales</li>
            </ul>
            
            <p><strong>Despu√©s del evento (22:16+):</strong></p>
            <ul style="text-align: left;">
                <li>‚ùå <strong>Sin etiqueta verde</strong> en la card</li>
                <li>‚ùå <strong>Sin punto pulsante</strong> en la esquina</li>
                <li>‚ö™ <strong>Card normal</strong> sin efectos especiales</li>
            </ul>
        </div>
        
        <div class="debug-info">
            <strong>Informaci√≥n de Debug:</strong><br>
            <span id="debug-info">Cargando...</span>
        </div>
        
        <div class="instructions">
            <h3>üìã Instrucciones</h3>
            <ol>
                <li><strong>Observa el countdown:</strong> Muestra cu√°nto tiempo falta para el evento</li>
                <li><strong>Espera a las 21:15:</strong> La etiqueta verde deber√≠a aparecer autom√°ticamente</li>
                <li><strong>Ve a jornadas.html:</strong> <a href="jornadas.html" style="color: #ffc107;">jornadas.html</a> para ver las etiquetas</li>
                <li><strong>Busca la card:</strong> "Evento de Prueba" con horario 21:15 - 22:15</li>
                <li><strong>Verifica la etiqueta:</strong> Debe mostrar "Comenz√≥ hace X min" en verde</li>
            </ol>
        </div>
        
        <div class="status-card">
            <h3>üéØ Controles de Prueba</h3>
            <button onclick="verificarSistema()">Verificar Sistema</button>
            <button onclick="simularEvento()">Simular Evento Ahora</button>
            <button onclick="window.open('jornadas.html', '_blank')">Abrir Jornadas</button>
            <button onclick="window.open('index.html', '_blank')">Abrir Index</button>
        </div>
    </div>

    <script>
        // Datos del evento real
        const eventoReal = {
            fecha: '2025-09-11',
            hora: '21:15',
            titulo: 'Evento de Prueba',
            tipo: 'ponencia'
        };

        function actualizarCountdown() {
            const ahora = new Date();
            const horaActual = ahora.getHours();
            const minutoActual = ahora.getMinutes();
            const tiempoActual = horaActual * 60 + minutoActual;
            
            const [horaEvento, minutoEvento] = eventoReal.hora.split(':');
            const tiempoEvento = parseInt(horaEvento) * 60 + parseInt(minutoEvento);
            
            const diferencia = tiempoEvento - tiempoActual;
            
            const countdownElement = document.getElementById('countdown');
            const statusElement = document.getElementById('status-text');
            
            if (diferencia > 0) {
                const horas = Math.floor(diferencia / 60);
                const minutos = diferencia % 60;
                countdownElement.textContent = `${horas.toString().padStart(2, '0')}:${minutos.toString().padStart(2, '0')}`;
                countdownElement.className = 'countdown warning';
                statusElement.innerHTML = '‚è≥ <strong>Esperando evento...</strong><br>Las etiquetas verdes aparecer√°n cuando comience el evento';
            } else if (diferencia >= -60) {
                const minutosTranscurridos = Math.abs(diferencia);
                countdownElement.textContent = `${minutosTranscurridos} min`;
                countdownElement.className = 'countdown success';
                statusElement.innerHTML = '‚úÖ <strong>Evento en curso!</strong><br>Las etiquetas verdes deber√≠an estar visibles en jornadas.html';
            } else {
                countdownElement.textContent = 'Finalizado';
                countdownElement.className = 'countdown info';
                statusElement.innerHTML = '‚ÑπÔ∏è <strong>Evento finalizado</strong><br>Las etiquetas verdes ya no deber√≠an estar visibles';
            }
        }

        function actualizarDebugInfo() {
            const ahora = new Date();
            const fechaActual = ahora.toISOString().split('T')[0];
            const horaActual = ahora.toLocaleTimeString('es-ES', { hour: '2-digit', minute: '2-digit' });
            
            const debugInfo = `
Fecha actual: ${fechaActual}<br>
Hora actual: ${horaActual}<br>
Fecha del evento: ${eventoReal.fecha}<br>
Hora del evento: ${eventoReal.hora}<br>
¬øFechas coinciden?: ${fechaActual === eventoReal.fecha ? 'S√ç' : 'NO'}<br>
Tiempo actual (min): ${ahora.getHours() * 60 + ahora.getMinutes()}<br>
Tiempo evento (min): ${parseInt(eventoReal.hora.split(':')[0]) * 60 + parseInt(eventoReal.hora.split(':')[1])}<br>
Diferencia: ${(parseInt(eventoReal.hora.split(':')[0]) * 60 + parseInt(eventoReal.hora.split(':')[1])) - (ahora.getHours() * 60 + ahora.getMinutes())} min<br>
¬øEtiqueta deber√≠a estar visible?: ${(parseInt(eventoReal.hora.split(':')[0]) * 60 + parseInt(eventoReal.hora.split(':')[1])) - (ahora.getHours() * 60 + ahora.getMinutes()) <= 0 && (parseInt(eventoReal.hora.split(':')[0]) * 60 + parseInt(eventoReal.hora.split(':')[1])) - (ahora.getHours() * 60 + ahora.getMinutes()) >= -60 ? 'S√ç' : 'NO'}
            `.trim();
            
            document.getElementById('debug-info').innerHTML = debugInfo;
        }

        function verificarSistema() {
            actualizarCountdown();
            actualizarDebugInfo();
            
            // Verificar si las etiquetas deber√≠an estar visibles
            const ahora = new Date();
            const tiempoActual = ahora.getHours() * 60 + ahora.getMinutes();
            const tiempoEvento = parseInt(eventoReal.hora.split(':')[0]) * 60 + parseInt(eventoReal.hora.split(':')[1]);
            const diferencia = tiempoActual - tiempoEvento;
            
            if (diferencia >= 0 && diferencia < 60) {
                alert('‚úÖ Las etiquetas verdes deber√≠an estar visibles ahora. Ve a jornadas.html para verlas.');
            } else if (diferencia < 0) {
                alert(`‚è≥ El evento comenzar√° en ${Math.abs(diferencia)} minutos. Las etiquetas aparecer√°n entonces.`);
            } else {
                alert('‚ÑπÔ∏è El evento ya finaliz√≥ hace m√°s de 1 hora. Las etiquetas ya no deber√≠an estar visibles.');
            }
        }

        function simularEvento() {
            if (confirm('¬øSimular que el evento est√° en curso ahora? Esto es solo para pruebas.')) {
                alert('üéØ Simulando evento en curso. Ve a jornadas.html para ver las etiquetas verdes.');
            }
        }

        // Actualizar cada segundo
        setInterval(() => {
            actualizarCountdown();
            actualizarDebugInfo();
        }, 1000);

        // Inicializar
        window.onload = function() {
            actualizarCountdown();
            actualizarDebugInfo();
        };
    </script>
</body>
</html>
